<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Molecular Wiki - Full & Scientific</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            background-color: #ffffff; 
            padding: 40px; 
            font-family: 'Courier New', Courier, monospace; 
        }

        /* Top Banner - Solid Black Border */
        .banner { 
            width: 600px; 
            height: 180px; 
            border: 4px solid black; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 80px; 
            font-weight: bold;
            margin-bottom: 40px; 
        }

        /* Search Box - Solid Black Border */
        .search-container { 
            width: 550px; 
            height: 45px; 
            border: 3px solid black; 
            margin-bottom: 60px; 
            background: #fff;
        }
        .search-container input { 
            width: 100%; 
            height: 100%; 
            border: none; 
            text-align: center; 
            font-size: 22px; 
            font-weight: bold; 
            outline: none; 
        }

        /* Layout for each substance */
        .molecule-entry { 
            width: 550px; 
            margin-bottom: 80px; 
            display: flex; 
            flex-direction: column; 
        }

        .molecule-title { 
            font-weight: bold; 
            font-size: 24px; 
            margin-bottom: 10px; 
            text-transform: uppercase;
        }

        /* Knowledge Box - You can type your info here */
        .knowledge-box { 
            width: 380px; 
            min-height: 70px; 
            border: 3px solid black; 
            margin-bottom: 25px; 
            padding: 15px;
            font-size: 16px;
            background-color: white;
            line-height: 1.4;
        }

        /* 3D Viewer - Gray Background */
        .canvas-3d { 
            width: 500px; 
            height: 300px; 
            background-color: #808080; 
            border: 3px solid black; 

            .molecule-entry { 
    /* ... keep your existing code ... */
    transition: opacity 0.3s ease;
}

/* This class helps the 3D renderer ignore hidden boxes */
.molecule-entry[style*="display: none"] {
    opacity: 0;
}
        }
    </style>
</head>
<body>

    <div class="banner">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwRh4sxC32jae9XDBM50RDHcmhyC2wdr2yR_Q0bWrQc7_MoKkev3-LLsQ&s=10" alt="Banner" style="width:100%; height:100%; object-fit:cover;">
    </div>
 <h2>There are 25 molecules</h2>
    <div class="search-container">
        <input type="text" id="mol-search" placeholder="SEARCH BOX" onkeydown="if(event.key==='Enter') searchMolecule()">
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">HCL (Hydrochloric Acid)</div>
        <div class="knowledge-box">
            HCl is a strong corrosive acid. It consists of a polar covalent bond.
        </div>
        <div id="hcl-box" class="canvas-3d"></div>
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">H<sub>2</sub>O (Water)</div>
        <div class="knowledge-box">
            The universal solvent. It has a bent molecular geometry due to lone pairs.
        </div>
        <div id="h2o-box" class="canvas-3d"></div>
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">Glucose (C<sub>6</sub>H<sub>12</sub></sub>O<sub>6</sub>)</div>
        <div class="knowledge-box">
            Primary energy source for cells. 24 atoms held by covalent bonds.
        </div>
        <div id="glucose-box" class="canvas-3d"></div>
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">NaCl (Sodium Chloride)</div>
        <div class="knowledge-box">
            Ionic lattice. Ions are gathered together by electrostatic attraction without covalent "sticks". It is used in the meals. It is a widespread kind of salt
        </div>
        <div id="nacl-box" class="canvas-3d"></div>
    </div>
<div class="molecule-entry">
        <div class="molecule-title">Ethanol (C<sub>2</sub>H<sub>5</sub>OH)</div>
        <div class="knowledge-box">
            Common alcohol found in beverages. It has a hydroxyl group (-OH) attached to an ethyl chain.
        </div>
        <div id="ethanol-box" class="canvas-3d"></div>
</div>
    <div class="molecule-entry">
        <div class="molecule-title">Sodium Hydroxide (NaOH)</div>
        <div class="knowledge-box">
            Known as lye. It is a strong base. The Na+ ion is ionically attracted to the OH- group.
        </div>
        <div id="naoh-box" class="canvas-3d"></div>
            </div>
      <div class="molecule-entry">
        <div class="molecule-title">Sulfuric Acid (H<sub>2</sub>SO<sub>4</sub>)</div>
        <div class="knowledge-box">
            A highly corrosive strong mineral acid. Known historically as "oil of vitriol."
        </div>
        <div id="h2so4-box" class="canvas-3d"></div>
      </div>
 <div class="molecule-entry">
        <div class="molecule-title">Potassium Hydroxide (KOH)</div>
        <div class="knowledge-box">
            A strong inorganic base. Like NaOH, it features an ionic bond between the metal cation (K+) and the hydroxyl anion (OH-).
        </div>
        <div id="koh-box" class="canvas-3d"></div>
 </div>
    <div class="molecule-entry">
        <div class="molecule-title">Nitric Acid (HNO<sub>3</sub>)</div>
        <div class="knowledge-box">
            A highly corrosive mineral acid. It is used in the production of fertilizers and explosives.
        </div>
        <div id="hno3-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
        <div class="molecule-title">Potassium Iodide (KI)</div>
      <div class="knowledge-box">
            An ionic compound used in medicine and photography. It forms a cubic crystal lattice similar to table salt.
        </div>
        <div id="ki-box" class="canvas-3d"></div>
    </div>
<div class="molecule-entry">
    <div class="molecule-title">VINEGAR (ACETIC ACID - CH<sub>3</sub>COOH)</div>
    <div class="knowledge-box">
        Acetic acid gives vinegar its sour taste and pungent smell. It is a weak acid used in food preservation and cooking.
    </div>
    <div id="vinegar-box" class="canvas-3d"></div>
</div>
    <div class="molecule-entry">
    <div class="molecule-title">CALCIUM CARBONATE (CaCO<sub>3</sub>)</div>
    <div class="knowledge-box">
        Commonly found in rocks as the minerals calcite and aragonite. It is the main component of pearls and the shells of marine organisms, snails, and eggs.
    </div>
    <div id="caco3-box" class="canvas-3d"></div>
    </div>

<div class="molecule-entry">
    <div class="molecule-title">HYDROGEN PEROXIDE (H<sub>2</sub>O<sub>2</sub>)</div>
    <div class="knowledge-box">
        A pale blue, clear liquid, slightly more viscous than water. It is used as an oxidizer, bleaching agent, and antiseptic.
    </div>
    <div id="h2o2-box" class="canvas-3d"></div>
</div>
    <div class="molecule-entry">
    <div class="molecule-title">GLYCERIN (C<sub>3</sub>H<sub>8</sub>O<sub>3</sub>)</div>
    <div class="knowledge-box">
        A viscous, sweet-tasting liquid. It has three hydroxyl groups (-OH) which make it highly soluble in water and hygroscopic.
    </div>
    <div id="glycerin-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">METHANE (CH<sub>4</sub>)</div>
    <div class="knowledge-box">
        The simplest hydrocarbon and the primary component of natural gas. It has a tetrahedral geometry with bond angles of 109.5 degrees.
    </div>
    <div id="methane-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">CHLOROPHYLL (CORE STRUCTURE)</div>
    <div class="knowledge-box">
        The green pigment found in cyanobacteria and the chloroplasts of algae and plants. It is essential for photosynthesis, allowing plants to absorb energy from light.
    </div>
    <div id="chlorophyll-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">BAKING SODA (NaHCO<sub>3</sub>)</div>
    <div class="knowledge-box">
        Also known as Sodium Bicarbonate. It is a white crystalline solid that often appears as a fine powder. It reacts with acids (like vinegar) to release Carbon Dioxide gas.
    </div>
    <div id="baking-soda-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">AMMONIA (NH<sub>3</sub>)</div>
    <div class="knowledge-box">
        A colorless gas with a characteristic pungent smell. It is a stable binary hydride and serves as a precursor to many food and fertilizer products.
    </div>
    <div id="ammonia-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">ACETONE ((CH<sub>3</sub>)<sub>2</sub>CO)</div>
    <div class="knowledge-box">
        A colorless, highly volatile and flammable liquid. It is the simplest and smallest ketone, widely used as a solvent in nail polish remover and paint thinners.
    </div>
    <div id="acetone-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">MAGNESIUM HYDROXIDE (Mg(OH)<sub>2</sub>)</div>
    <div class="knowledge-box">
        Commonly known as Milk of Magnesia. It is an inorganic compound used as an antacid to neutralize stomach acid and as a laxative.
    </div>
    <div id="mgoh2-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">ETHYLENE (C<sub>2</sub>H<sub>4</sub>)</div>
    <div class="knowledge-box">
        Also called ethene. It is a gaseous hydrocarbon that is the simplest alkene. In biology, it acts as a hormone that signals fruit to ripen and flowers to wilt.
    </div>
    <div id="ethylene-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">SODIUM CYANIDE (NaCN)</div>
    <div class="knowledge-box">
        An inorganic compound that is a white, water-soluble solid. It is highly toxic and is used industrially in gold mining and chemical synthesis.
    </div>
    <div id="nacn-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">TNT (C<sub>7</sub>H<sub>5</sub>N<sub>3</sub>O<sub>6</sub>)</div>
    <div class="knowledge-box">
        Trinitrotoluene is a yellow solid chemical compound most commonly known as an explosive material with convenient handling properties. It is the standard measure of strength for explosives.
    </div>
    <div id="tnt-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">CAFFEINE (C<sub>8</sub>H<sub>10</sub>N<sub>4</sub>O<sub>2</sub>)</div>
    <div class="knowledge-box">
        A central nervous system stimulant of the methylxanthine class. It is the world's most widely consumed psychoactive substance, found naturally in coffee, tea, and cacao.
    </div>
    <div id="caffeine-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">Mustard Gas (C4H8Cl2S)</div>
    <div class="knowledge-box">
        A powerful vesicant (blister-agent) chemical warfare agent. It acts as an alkylating agent that damages DNA, leading to severe cellular damage and skin blistering. While colorless in pure form, it often has an odor resembling mustard or garlic due to impurities. Its production and use are strictly prohibited worldwide under the Chemical Weapons Convention (CWC).
    </div>
    <div id="mustard-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
    <div class="molecule-title">MAGNESIUM CHLORIDE (MgCl<sub>2</sub>)</div>
    <div class="knowledge-box">
        An inorganic salt used for dust control, road de-icing, and as a supplement. It is highly hygroscopic, meaning it readily absorbs moisture from the air.
    </div>
    <div id="mgcl2-box" class="canvas-3d"></div>
    </div>
        <script>
    // --- DATA ---
    const molData = [
        {id: 'hcl-box', a: [{c:0xf542b0, s:0.7, x:-0.6, y:0, z:0}, {c:0xeeeeee, s:0.4, x:0.6, y:0, z:0}], b: [{f:0, t:1}], i: false, z: 5},
        {id: 'h2o-box', a: [{c:0xff0000, s:0.6, x:0, y:0.3, z:0}, {c:0xeeeeee, s:0.4, x:-0.6, y:-0.4, z:0}, {c:0xeeeeee, s:0.4, x:0.6, y:-0.4, z:0}], b: [{f:0, t:1}, {f:0, t:2}], i: false, z: 5},
        {id: 'glucose-box', a: [{c:0x333333,s:0.5,x:1,y:0,z:0},{c:0x333333,s:0.5,x:0.5,y:0.8,z:0.5},{c:0x333333,s:0.5,x:-0.5,y:0.8,z:0.5},{c:0x333333,s:0.5,x:-1,y:0,z:0},{c:0x333333,s:0.5,x:-0.5,y:-0.8,z:-0.5},{c:0x333333,s:0.5,x:0.5,y:-0.8,z:-0.5},{c:0xff0000,s:0.4,x:1.8,y:0,z:0},{c:0xff0000,s:0.4,x:1,y:1.5,z:1},{c:0xff0000,s:0.4,x:-1,y:1.5,z:1},{c:0xff0000,s:0.4,x:-1.8,y:0,z:0},{c:0xff0000,s:0.4,x:-1,y:-1.5,z:-1},{c:0xff0000,s:0.4,x:1,y:-1.5,z:-1},{c:0xeeeeee,s:0.2,x:1,y:0.5,z:-0.5},{c:0xeeeeee,s:0.2,x:2.5,y:0.5,z:0},{c:0xeeeeee,s:0.2,x:0.5,y:1.2,z:-0.2},{c:0xeeeeee,s:0.2,x:1.5,y:2,z:1},{c:0xeeeeee,s:0.2,x:-0.5,y:1.2,z:-0.2},{c:0xeeeeee,s:0.2,x:-1.5,y:2,z:1},{c:0xeeeeee,s:0.2,x:-1,y:0.5,z:0.5},{c:0xeeeeee,s:0.2,x:-2.5,y:0.5,z:0},{c:0xeeeeee,s:0.2,x:-0.5,y:-1.2,z:0.2},{c:0xeeeeee,s:0.2,x:-1.5,y:-2,z:-1},{c:0xeeeeee,s:0.2,x:0.5,y:-1.2,z:0.2},{c:0xeeeeee,s:0.2,x:1.5,y:-2,z:-1}], b: [{f:0,t:1},{f:1,t:2},{f:2,t:3},{f:3,t:4},{f:4,t:5},{f:5,t:0}], i: false, z: 8},
         {
    id: 'nacl-box', 
    // I replaced the old atoms array with these 14 coordinates:
    a: [
        {c:0x8A2BE2, s:0.65, x:-1, y:1, z:1},  {c:0xf542b0, s:0.65, x:1, y:1, z:1},
        {c:0xf542b0, s:0.65, x:-1, y:1, z:-1}, {c:0x8A2BE2, s:0.65, x:1, y:1, z:-1},
        {c:0xf542b0, s:0.65, x:-1, y:-1, z:1}, {c:0x8A2BE2, s:0.65, x:1, y:-1, z:1},
        {c:0x8A2BE2, s:0.65, x:-1, y:-1, z:-1},{c:0xf542b0, s:0.65, x:1, y:-1, z:-1},
        {c:0x8A2BE2, s:0.65, x:0, y:0, z:1},    {c:0x8A2BE2, s:0.65, x:0, y:0, z:-1},
        {c:0xf542b0, s:0.65, x:1, y:0, z:0},    {c:0xf542b0, s:0.65, x:-1, y:0, z:0},
        {c:0x8A2BE2, s:0.65, x:0, y:1, z:0},    {c:0x8A2BE2, s:0.65, x:0, y:-1, z:0}
    ], 
    b: [], 
    i: true, 
    z: 8
},                               
        {id: 'ethanol-box', a: [{c:0x333333,s:0.5,x:-0.7,y:0,z:0},{c:0x333333,s:0.5,x:0.7,y:0,z:0},{c:0xff0000,s:0.45,x:1.5,y:0.7,z:0},{c:0xeeeeee,s:0.25,x:2.1,y:0.3,z:0},{c:0xeeeeee,s:0.25,x:-1.2,y:0.7,z:0.5},{c:0xeeeeee,s:0.25,x:-1.2,y:-0.7,z:-0.5},{c:0xeeeeee,s:0.25,x:-1.2,y:0,z:-1},{c:0xeeeeee,s:0.25,x:0.7,y:-0.8,z:0.5},{c:0xeeeeee,s:0.25,x:0.7,y:0.8,z:-0.5}], b: [{f:0,t:1},{f:1,t:2},{f:2,t:3},{f:0,t:4},{f:0,t:5},{f:0,t:6},{f:1,t:7},{f:1,t:8}], i: false, z: 5},
        {id: 'naoh-box', a: [{c:0x8A2BE2, s:0.65, x:-0.6, y:0, z:0}, {c:0xff0000, s:0.65, x:0.6, y:0, z:0}, {c:0xeeeeee, s:0.35, x:1.3, y:0, z:0}], b: [{f:1, t:2}], i: false, z: 5},
        {id: 'h2so4-box', a: [{c:0xffff00,s:0.65,x:0,y:0,z:0},{c:0xff0000,s:0.5,x:0,y:1.2,z:0},{c:0xff0000,s:0.5,x:0,y:-1.2,z:0},{c:0xff0000,s:0.5,x:1.1,y:0,z:0.5},{c:0xff0000,s:0.5,x:-1.1,y:0,z:-0.5},{c:0xeeeeee,s:0.25,x:1.6,y:0.6,z:0.5},{c:0xeeeeee,s:0.25,x:-1.6,y:-0.6,z:-0.5}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:0,t:4},{f:3,t:5},{f:4,t:6}], i: false, z: 7},
        {id: 'koh-box', a: [{c:0xc381fd, s:0.7, x:-0.7, y:0, z:0}, {c:0xff0000, s:0.65, x:0.7, y:0, z:0}, {c:0xeeeeee, s:0.35, x:1.4, y:0, z:0}], b: [{f:1, t:2}], i: false, z: 5},
        {id: 'hno3-box', a: [{c:0x0000ff,s:0.55,x:0,y:0,z:0},{c:0xff0000,s:0.5,x:0,y:1.2,z:0},{c:0xff0000,s:0.5,x:1.1,y:-0.6,z:0},{c:0xff0000,s:0.5,x:-1.1,y:-0.6,z:0},{c:0xeeeeee,s:0.25,x:-1.8,y:-0.2,z:0}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:3,t:4}], i: false, z: 6},
        {id: 'ki-box', a: [{c:0xffff00,s:0.65,x:-0.65,y:0.65,z:0.65},{c:0x4b0082,s:0.65,x:0.65,y:0.65,z:0.65},{c:0x4b0082,s:0.65,x:-0.65,y:-0.65,z:0.65},{c:0xffff00,s:0.65,x:0.65,y:-0.65,z:0.65},{c:0x4b0082,s:0.65,x:-0.65,y:0.65,z:-0.65},{c:0xffff00,s:0.65,x:0.65,y:0.65,z:-0.65},{c:0xffff00,s:0.65,x:-0.65,y:-0.65,z:-0.65},{c:0x4b0082,s:0.65,x:0.65,y:-0.65,z:-0.65}], b: [], i: true, z: 6},
        {id: 'vinegar-box', a: [{c:0x333333,s:0.5,x:0.5,y:0,z:0},{c:0x333333,s:0.5,x:-1,y:0,z:0},{c:0xff0000,s:0.45,x:1.1,y:1,z:0},{c:0xff0000,s:0.45,x:1.1,y:-1,z:0},{c:0xeeeeee,s:0.25,x:2,y:-1,z:0},{c:0xeeeeee,s:0.25,x:-1.4,y:1,z:0},{c:0xeeeeee,s:0.25,x:-1.4,y:-0.5,z:0.8},{c:0xeeeeee,s:0.25,x:-1.4,y:-0.5,z:-0.8}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:3,t:4},{f:1,t:5},{f:1,t:6},{f:1,t:7}], i: false, z: 6},
        {id: 'caco3-box', a: [{c:0x5efff4,s:0.7,x:-0.8,y:0,z:0},{c:0x333333,s:0.5,x:0.8,y:0,z:0},{c:0xff0000,s:0.45,x:0.8,y:1,z:0},{c:0xff0000,s:0.45,x:1.7,y:-0.5,z:0},{c:0xff0000,s:0.45,x:-0.1,y:-0.5,z:0}], b: [{f:1,t:2},{f:1,t:3},{f:1,t:4}], i: false, z: 5},
        {id: 'h2o2-box', a: [{c:0xff0000,s:0.55,x:-0.5,y:0,z:0},{c:0xff0000,s:0.55,x:0.5,y:0,z:0},{c:0xeeeeee,s:0.3,x:-1,y:0.7,z:0.3},{c:0xeeeeee,s:0.3,x:1,y:-0.7,z:0.3}], b: [{f:0,t:1},{f:0,t:2},{f:1,t:3}], i: false, z: 5},
        {id: 'glycerin-box', a: [{c:0x333333,s:0.5,x:-1.2,y:0,z:0},{c:0x333333,s:0.5,x:0,y:0,z:0},{c:0x333333,s:0.5,x:1.2,y:0,z:0},{c:0xff0000,s:0.45,x:-1.2,y:1,z:0.5},{c:0xff0000,s:0.45,x:0,y:1,z:-0.5},{c:0xff0000,s:0.45,x:1.2,y:1,z:0.5},{c:0xeeeeee,s:0.25,x:-1.2,y:1.5,z:0.5},{c:0xeeeeee,s:0.25,x:0,y:1.5,z:-0.5},{c:0xeeeeee,s:0.25,x:1.2,y:1.5,z:0.5},{c:0xeeeeee,s:0.2,x:-1.8,y:-0.5,z:0.5},{c:0xeeeeee,s:0.2,x:-1.8,y:-0.5,z:-0.5},{c:0xeeeeee,s:0.2,x:0,y:-0.8,z:0},{c:0xeeeeee,s:0.2,x:1.8,y:-0.5,z:0.5},{c:0xeeeeee,s:0.2,x:1.8,y:-0.5,z:-0.5}], b: [{f:0,t:1},{f:1,t:2},{f:0,t:3},{f:1,t:4},{f:2,t:5},{f:3,t:6},{f:4,t:7},{f:5,t:8},{f:0,t:9},{f:0,t:10},{f:1,t:11},{f:2,t:12},{f:2,t:13}], i: false, z: 7},
        {id: 'methane-box', a: [{c:0x333333,s:0.6,x:0,y:0,z:0},{c:0xeeeeee,s:0.3,x:1,y:1,z:1},{c:0xeeeeee,s:0.3,x:-1,y:-1,z:1},{c:0xeeeeee,s:0.3,x:-1,y:1,z:-1},{c:0xeeeeee,s:0.3,x:1,y:-1,z:-1}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:0,t:4}], i: false, z: 6},
        {id: 'chlorophyll-box', a: [{c:0x32cd32,s:0.6,x:0,y:0,z:0},{c:0x333333,s:0.5,x:1.4,y:1.4,z:0},{c:0x333333,s:0.5,x:-1.4,y:1.4,z:0},{c:0x333333,s:0.5,x:-1.4,y:-1.4,z:0},{c:0x333333,s:0.5,x:1.4,y:-1.4,z:0},{c:0xff0000,s:0.45,x:0,y:2.2,z:0.5},{c:0xff0000,s:0.45,x:0,y:-2.2,z:0.5},{c:0x333333,s:0.5,x:2.5,y:0,z:0},{c:0x333333,s:0.5,x:-2.5,y:0,z:0},{c:0xeeeeee,s:0.25,x:3.2,y:0.5,z:0},{c:0xeeeeee,s:0.25,x:-3.2,y:0.5,z:0}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:0,t:4},{f:1,t:7},{f:2,t:8},{f:7,t:9},{f:8,t:10}], i: false, z: 12},
        {id: 'baking-soda-box', a: [{c:0x8A2BE2,s:0.6,x:-1.2,y:0,z:0},{c:0x333333,s:0.5,x:0.5,y:0,z:0},{c:0xff0000,s:0.45,x:0.5,y:1.1,z:0},{c:0xff0000,s:0.45,x:1.5,y:-0.6,z:0},{c:0xff0000,s:0.45,x:-0.5,y:-0.6,z:0},{c:0xeeeeee,s:0.25,x:-1.2,y:-0.6,z:0}], b: [{f:1,t:2},{f:1,t:3},{f:1,t:4},{f:4,t:5}], i: false, z: 6},
        {id: 'ammonia-box', a: [{c:0x0000ff,s:0.6,x:0,y:0.3,z:0},{c:0xeeeeee,s:0.3,x:0.9,y:-0.4,z:0.5},{c:0xeeeeee,s:0.3,x:-0.9,y:-0.4,z:0.5},{c:0xeeeeee,s:0.3,x:0,y:-0.4,z:-0.9}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3}], i: false, z: 5},
        {id: 'acetone-box', a: [{c:0x333333,s:0.5,x:0,y:0,z:0},{c:0xff0000,s:0.5,x:0,y:1.2,z:0},{c:0x333333,s:0.5,x:-1.1,y:-0.7,z:0},{c:0x333333,s:0.5,x:1.1,y:-0.7,z:0},{c:0xeeeeee,s:0.25,x:-1.1,y:-1.3,z:0.8},{c:0xeeeeee,s:0.25,x:-1.1,y:-1.3,z:-0.8},{c:0xeeeeee,s:0.25,x:-1.9,y:-0.3,z:0},{c:0xeeeeee,s:0.25,x:1.1,y:-1.3,z:0.8},{c:0xeeeeee,s:0.25,x:1.1,y:-1.3,z:-0.8},{c:0xeeeeee,s:0.25,x:1.9,y:-0.3,z:0}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:2,t:4},{f:2,t:5},{f:2,t:6},{f:3,t:7},{f:3,t:8},{f:3,t:9}], i: false, z: 7},
        {id: 'mgoh2-box', a: [{c:0x32cd32,s:0.65,x:0,y:0,z:0},{c:0xff0000,s:0.5,x:1.1,y:0.4,z:0},{c:0xeeeeee,s:0.3,x:1.8,y:0.4,z:0},{c:0xff0000,s:0.5,x:-1.1,y:-0.4,z:0},{c:0xeeeeee,s:0.3,x:-1.8,y:-0.4,z:0}], b: [{f:1,t:2},{f:3,t:4}], i: false, z: 6},
        {id: 'ethylene-box', a: [{c:0x333333,s:0.55,x:-0.65,y:0,z:0},{c:0x333333,s:0.55,x:0.65,y:0,z:0},{c:0xeeeeee,s:0.3,x:-1.2,y:0.8,z:0},{c:0xeeeeee,s:0.3,x:-1.2,y:-0.8,z:0},{c:0xeeeeee,s:0.3,x:1.2,y:0.8,z:0},{c:0xeeeeee,s:0.3,x:1.2,y:-0.8,z:0}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:1,t:4},{f:1,t:5}], i: false, z: 5},
        {id: 'nacn-box', a: [{c:0x8A2BE2,s:0.6,x:-1.0,y:0,z:0},{c:0x333333,s:0.5,x:0.5,y:0,z:0},{c:0x0000ff,s:0.5,x:1.5,y:0,z:0}], b: [{f:1,t:2}], i: false, z: 5},
        {id: 'tnt-box', a: [
    {c:0x333333,s:0.5,x:0,y:1,z:0}, {c:0x333333,s:0.5,x:0.86,y:0.5,z:0}, {c:0x333333,s:0.5,x:0.86,y:-0.5,z:0}, {c:0x333333,s:0.5,x:0,y:-1,z:0}, {c:0x333333,s:0.5,x:-0.86,y:-0.5,z:0}, {c:0x333333,s:0.5,x:-0.86,y:0.5,z:0}, // Benzene Ring
    {c:0x333333,s:0.5,x:0,y:2,z:0}, {c:0xeeeeee,s:0.25,x:0.7,y:2.4,z:0.5}, {c:0xeeeeee,s:0.25,x:-0.7,y:2.4,z:0.5}, {c:0xeeeeee,s:0.25,x:0,y:2.4,z:-0.8}, // Top Methyl Group
    {c:0x0000ff,s:0.45,x:1.8,y:1,z:0}, {c:0xff0000,s:0.4,x:2.4,y:1.5,z:0}, {c:0xff0000,s:0.4,x:2.4,y:0.5,z:0}, // Nitro Group 1
    {c:0x0000ff,s:0.45,x:0,y:-2,z:0}, {c:0xff0000,s:0.4,x:0.6,y:-2.6,z:0}, {c:0xff0000,s:0.4,x:-0.6,y:-2.6,z:0}, // Nitro Group 2
    {c:0x0000ff,s:0.45,x:-1.8,y:1,z:0}, {c:0xff0000,s:0.4,x:-2.4,y:1.5,z:0}, {c:0xff0000,s:0.4,x:-2.4,y:0.5,z:0} // Nitro Group 3
], b: [
    {f:0,t:1}, {f:1,t:2}, {f:2,t:3}, {f:3,t:4}, {f:4,t:5}, {f:5,t:0}, // Ring bonds
    {f:0,t:6}, {f:6,t:7}, {f:6,t:8}, {f:6,t:9}, // Methyl bonds
    {f:1,t:10}, {f:10,t:11}, {f:10,t:12}, // Nitro 1 bonds
    {f:3,t:13}, {f:13,t:14}, {f:13,t:15}, // Nitro 2 bonds
    {f:5,t:16}, {f:16,t:17}, {f:16,t:18}  // Nitro 3 bonds
], i: false, z: 10},
            {id: 'caffeine-box', a: [
    // CORE SKELETON (C and N)
    {c:0x0000ff,s:0.45,x:-0.5,y:0.8,z:0},  // 0: N
    {c:0x333333,s:0.5,x:0.5,y:1.5,z:0},    // 1: C
    {c:0x0000ff,s:0.45,x:1.5,y:0.8,z:0},   // 2: N
    {c:0x333333,s:0.5,x:1.5,y:-0.5,z:0},   // 3: C
    {c:0x333333,s:0.5,x:0.5,y:-1.2,z:0},   // 4: C
    {c:0x333333,s:0.5,x:-0.5,y:-0.5,z:0},  // 5: C
    {c:0x0000ff,s:0.45,x:2.6,y:-1.0,z:0},  // 6: N
    {c:0x333333,s:0.5,x:3.2,y:-0.1,z:0},   // 7: C
    {c:0x0000ff,s:0.45,x:2.6,y:0.8,z:0},   // 8: N
    // OXYGENS (Pushed further out to avoid overlap)
    {c:0xff0000,s:0.5,x:0.5,y:2.8,z:0},    // 9: O (Pushed Up)
    {c:0xff0000,s:0.5,x:-1.8,y:-1.0,z:0},  // 10: O (Pushed Left)
    // METHYL CARBONS
    {c:0x333333,s:0.5,x:-1.8,y:1.8,z:0},   // 11: C (Methyl)
    {c:0x333333,s:0.5,x:1.5,y:2.1,z:0},    // 12: C (Methyl)
    {c:0x333333,s:0.5,x:3.4,y:-2.4,z:0},   // 13: C (Methyl)
    // HYDROGENS (Spacing adjusted)
    {c:0xeeeeee,s:0.25,x:4.3,y:-0.1,z:0},  // 14: H (on C8)
    {c:0xeeeeee,s:0.25,x:-1.8,y:2.5,z:0.6}, {c:0xeeeeee,s:0.25,x:-1.8,y:2.5,z:-0.6}, {c:0xeeeeee,s:0.25,x:-2.6,y:1.5,z:0}, // 15-17
    {c:0xeeeeee,s:0.25,x:2.3,y:2.6,z:0.6}, {c:0xeeeeee,s:0.25,x:2.3,y:2.6,z:-0.6}, {c:0xeeeeee,s:0.25,x:1.5,y:2.9,z:0}, // 18-20
    {c:0xeeeeee,s:0.25,x:3.4,y:-3.1,z:0.8}, {c:0xeeeeee,s:0.25,x:3.4,y:-3.1,z:-0.8}, {c:0xeeeeee,s:0.25,x:4.2,y:-2.2,z:0} // 21-23
], b: [
    {f:0,t:1},{f:1,t:2},{f:2,t:3},{f:3,t:4},{f:4,t:5},{f:5,t:0},
    {f:3,t:6},{f:6,t:7},{f:7,t:8},{f:8,t:2},
    {f:1,t:9},{f:5,t:10},
    {f:0,t:11},{f:2,t:12},{f:6,t:13},
    {f:7,t:14},
    {f:11,t:15},{f:11,t:16},{f:11,t:17},
    {f:12,t:18},{f:12,t:19},{f:12,t:20},
    {f:13,t:21},{f:13,t:22},{f:13,t:23}
], i: false, z: 12},
        {
    id: 'mustard-box',
    a: [
        {c:0xffff00, s:0.7, x:0, y:0, z:0},       // 0: Sulfur (S)
        // Left Side
        {c:0x333333, s:0.5, x:-1.2, y:0.5, z:0},  // 1: Carbon (C1)
        {c:0x333333, s:0.5, x:-2.4, y:-0.2, z:0}, // 2: Carbon (C2)
        {c:0x00ff00, s:0.65, x:-3.8, y:0.5, z:0}, // 3: Chlorine (Cl1)
        // Right Side
        {c:0x333333, s:0.5, x:1.2, y:0.5, z:0},   // 4: Carbon (C3)
        {c:0x333333, s:0.5, x:2.4, y:-0.2, z:0},  // 5: Carbon (C4)
        {c:0x00ff00, s:0.65, x:3.8, y:0.5, z:0},  // 6: Chlorine (Cl2)
        // Hydrogens (Optional for detail)
        {c:0xeeeeee, s:0.25, x:-1.2, y:1.2, z:0.5}, {c:0xeeeeee, s:0.25, x:-1.2, y:1.2, z:-0.5}, // On C1
        {c:0xeeeeee, s:0.25, x:-2.4, y:-0.9, z:0.5}, {c:0xeeeeee, s:0.25, x:-2.4, y:-0.9, z:-0.5}, // On C2
        {c:0xeeeeee, s:0.25, x:1.2, y:1.2, z:0.5}, {c:0xeeeeee, s:0.25, x:1.2, y:1.2, z:-0.5},   // On C3
        {c:0xeeeeee, s:0.25, x:2.4, y:-0.9, z:0.5}, {c:0xeeeeee, s:0.25, x:2.4, y:-0.9, z:-0.5}   // On C4
    ],
    b: [
        {f:0, t:1}, {f:1, t:2}, {f:2, t:3}, // Left chain
        {f:0, t:4}, {f:4, t:5}, {f:5, t:6}, // Right chain
        {f:1, t:7}, {f:1, t:8}, {f:2, t:9}, {f:2, t:10}, // Hydrogens left
        {f:4, t:11}, {f:4, t:12}, {f:5, t:13}, {f:5, t:14} // Hydrogens right
    ],
    i: false,
    z: 10
},
        {id: 'mgcl2-box', a: [{c:0x32cd32,s:0.5,x:0,y:0,z:0},{c:0x32cd32,s:0.5,x:1.2,y:1.2,z:0},{c:0x32cd32,s:0.5,x:0,y:1.2,z:1.2},{c:0x32cd32,s:0.5,x:1.2,y:0,z:1.2},{c:0xf542b0,s:0.6,x:1.2,y:0,z:0},{c:0xf542b0,s:0.6,x:0,y:1.2,z:0},{c:0xf542b0,s:0.6,x:0,y:0,z:1.2},{c:0xf542b0,s:0.6,x:1.2,y:1.2,z:1.2}], b: [], i: false, z: 7}
    ];

    let renderer, scene;
    const scenes = [];

    function init() {
        const canvas = document.createElement('canvas');
        renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(window.devicePixelRatio);

        molData.forEach(data => {
            const el = document.getElementById(data.id);
            if(!el) return;

            const scene = new THREE.Scene();
            scene.userData.element = el;
            
            // Fixed camera setup - ensures the molecule fits the 500x300 box
            const camera = new THREE.PerspectiveCamera(50, 500 / 300, 0.1, 100);
            camera.position.z = data.z;
            scene.userData.camera = camera;

            scene.add(new THREE.AmbientLight(0xffffff, 0.8));
            const light = new THREE.PointLight(0xffffff, 1);
            light.position.set(10, 10, 10);
            scene.add(light);

            const group = new THREE.Group();
            data.a.forEach(a => {
                const mesh = new THREE.Mesh(new THREE.SphereGeometry(a.s, 24, 24), new THREE.MeshPhongMaterial({ color: a.c }));
                mesh.position.set(a.x, a.y, a.z);
                group.add(mesh);
            });

            if (!data.i) {
                data.b.forEach(b => {
                    const start = new THREE.Vector3(data.a[b.f].x, data.a[b.f].y, data.a[b.f].z);
                    const end = new THREE.Vector3(data.a[b.t].x, data.a[b.t].y, data.a[b.t].z);
                    const dist = start.distanceTo(end);
                    const cyl = new THREE.Mesh(new THREE.CylinderGeometry(0.08, 0.08, dist, 12), new THREE.MeshPhongMaterial({ color: 0x917c6a }));
                    cyl.position.copy(start.clone().lerp(end, 0.5));
                    cyl.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), end.clone().sub(start).normalize());
                    group.add(cyl);
                });
            }
            scene.add(group);
            scene.userData.group = group;
            scenes.push(scene);
        });

        // Styling the canvas to sit behind the UI
        document.body.appendChild(renderer.domElement);
        renderer.domElement.style.position = 'fixed';
        renderer.domElement.style.top = '0px';
        renderer.domElement.style.left = '0px';
        renderer.domElement.style.width = '100vw';
        renderer.domElement.style.height = '100vh';
        renderer.domElement.style.pointerEvents = 'none';
        renderer.domElement.style.zIndex = '1';

        animate();
    }

    function animate() {
        requestAnimationFrame(animate);
        
        // Match renderer size to current window size
        const width = window.innerWidth;
        const height = window.innerHeight;
        if (renderer.domElement.width !== width || renderer.domElement.height !== height) {
            renderer.setSize(width, height, false);
        }

        renderer.setScissorTest(false);
        renderer.clear();
        renderer.setScissorTest(true);

        scenes.forEach(scene => {
            scene.userData.group.rotation.y += 0.05;
            const element = scene.userData.element;
            const rect = element.getBoundingClientRect();

            // Only draw if the box is visible on screen
            if (rect.bottom < 0 || rect.top > height || rect.right < 0 || rect.left > width) return;

            const elWidth = rect.right - rect.left;
            const elHeight = rect.bottom - rect.top;
            const left = rect.left;
            const bottom = height - rect.bottom;

            // This ensures the camera fits the exact pixels of your box
            scene.userData.camera.aspect = elWidth / elHeight;
            scene.userData.camera.updateProjectionMatrix();

            renderer.setViewport(left, bottom, elWidth, elHeight);
            renderer.setScissor(left, bottom, elWidth, elHeight);
            renderer.render(scene, scene.userData.camera);
        });
    }

    window.onload = init;
    function searchMolecule() {
    const input = document.getElementById('mol-search').value.toLowerCase();
    const entries = document.getElementsByClassName('molecule-entry');

    for (let i = 0; i < entries.length; i++) {
        const title = entries[i].getElementsByClassName('molecule-title')[0].innerText.toLowerCase();
        const info = entries[i].getElementsByClassName('knowledge-box')[0].innerText.toLowerCase();
        
        // If the title or the info text contains the search word, show it
        if (title.includes(input) || info.includes(input)) {
            entries[i].style.display = "flex";
        } else {
            entries[i].style.display = "none";
        }
    }
}

// Also, let's make it search instantly as you type instead of just pressing Enter
document.getElementById('mol-search').addEventListener('input', searchMolecule);  </script>
 </body>
</html>
