<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Molecular Wiki - Full & Scientific</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            background-color: #ffffff; 
            padding: 40px; 
            font-family: 'Courier New', Courier, monospace; 
        }

        /* Top Banner - Solid Black Border */
        .banner { 
            width: 600px; 
            height: 180px; 
            border: 4px solid black; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 80px; 
            font-weight: bold;
            margin-bottom: 40px; 
        }

        /* Search Box - Solid Black Border */
        .search-container { 
            width: 550px; 
            height: 45px; 
            border: 3px solid black; 
            margin-bottom: 60px; 
            background: #fff;
        }
        .search-container input { 
            width: 100%; 
            height: 100%; 
            border: none; 
            text-align: center; 
            font-size: 22px; 
            font-weight: bold; 
            outline: none; 
        }

        /* Layout for each substance */
        .molecule-entry { 
            width: 550px; 
            margin-bottom: 80px; 
            display: flex; 
            flex-direction: column; 
        }

        .molecule-title { 
            font-weight: bold; 
            font-size: 24px; 
            margin-bottom: 10px; 
            text-transform: uppercase;
        }

        /* Knowledge Box - You can type your info here */
        .knowledge-box { 
            width: 380px; 
            min-height: 70px; 
            border: 3px solid black; 
            margin-bottom: 25px; 
            padding: 15px;
            font-size: 16px;
            background-color: white;
            line-height: 1.4;
        }

        /* 3D Viewer - Gray Background */
        .canvas-3d { 
            width: 500px; 
            height: 300px; 
            background-color: #808080; 
            border: 3px solid black; 
        }
    </style>
</head>
<body>

    <div class="banner">Banner</div>

    <div class="search-container">
        <input type="text" id="mol-search" placeholder="SEARCH BOX" onkeydown="if(event.key==='Enter') searchMolecule()">
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">HCL (Hydrochloric Acid)</div>
        <div class="knowledge-box">
            HCl is a strong corrosive acid. It consists of a polar covalent bond.
        </div>
        <div id="hcl-box" class="canvas-3d"></div>
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">H2O (Water)</div>
        <div class="knowledge-box">
            The universal solvent. It has a bent molecular geometry due to lone pairs.
        </div>
        <div id="h2o-box" class="canvas-3d"></div>
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">Glucose (C6H12O6)</div>
        <div class="knowledge-box">
            Primary energy source for cells. 24 atoms held by covalent bonds.
        </div>
        <div id="glucose-box" class="canvas-3d"></div>
    </div>

    <div class="molecule-entry">
        <div class="molecule-title">NaCl (Sodium Chloride)</div>
        <div class="knowledge-box">
            Ionic lattice. Ions are gathered together by electrostatic attraction without covalent "sticks". It is used in the meals. It is a widespread kind of salt
        </div>
        <div id="nacl-box" class="canvas-3d"></div>
    </div>
<div class="molecule-entry">
        <div class="molecule-title">Ethanol (C2H5OH)</div>
        <div class="knowledge-box">
            Common alcohol found in beverages. It has a hydroxyl group (-OH) attached to an ethyl chain.
        </div>
        <div id="ethanol-box" class="canvas-3d"></div>
</div>
    <div class="molecule-entry">
        <div class="molecule-title">Sodium Hydroxide (NaOH)</div>
        <div class="knowledge-box">
            Known as lye. It is a strong base. The Na+ ion is ionically attracted to the OH- group.
        </div>
        <div id="naoh-box" class="canvas-3d"></div>
            </div>
      <div class="molecule-entry">
        <div class="molecule-title">Sulfuric Acid (H2SO4)</div>
        <div class="knowledge-box">
            A highly corrosive strong mineral acid. Known historically as "oil of vitriol."
        </div>
        <div id="h2so4-box" class="canvas-3d"></div>
      </div>
 <div class="molecule-entry">
        <div class="molecule-title">Potassium Hydroxide (KOH)</div>
        <div class="knowledge-box">
            A strong inorganic base. Like NaOH, it features an ionic bond between the metal cation (K+) and the hydroxyl anion (OH-).
        </div>
        <div id="koh-box" class="canvas-3d"></div>
 </div>
    <div class="molecule-entry">
        <div class="molecule-title">Nitric Acid (HNO3)</div>
        <div class="knowledge-box">
            A highly corrosive mineral acid. It is used in the production of fertilizers and explosives.
        </div>
        <div id="hno3-box" class="canvas-3d"></div>
    </div>
    <div class="molecule-entry">
        <div class="molecule-title">Potassium Iodide (KI)</div>
        <div class="knowledge-box">
            An ionic compound used in medicine and photography. It forms a cubic crystal lattice similar to table salt.
        </div>
        <div id="ki-box" class="canvas-3d"></div>
    </div>

        <script>
    // --- DATA ---
    const molData = [
        {id: 'hcl-box', a: [{c:0xff0000, s:0.7, x:-0.6, y:0, z:0}, {c:0x00ff00, s:0.4, x:0.6, y:0, z:0}], b: [{f:0, t:1}], i: false, z: 5},
        {id: 'h2o-box', a: [{c:0x00ff00, s:0.6, x:0, y:0.3, z:0}, {c:0x0000ff, s:0.4, x:-0.6, y:-0.4, z:0}, {c:0x0000ff, s:0.4, x:0.6, y:-0.4, z:0}], b: [{f:0, t:1}, {f:0, t:2}], i: false, z: 5},
        {id: 'glucose-box', a: [{c:0x333333,s:0.5,x:1,y:0,z:0},{c:0x333333,s:0.5,x:0.5,y:0.8,z:0.5},{c:0x333333,s:0.5,x:-0.5,y:0.8,z:0.5},{c:0x333333,s:0.5,x:-1,y:0,z:0},{c:0x333333,s:0.5,x:-0.5,y:-0.8,z:-0.5},{c:0x333333,s:0.5,x:0.5,y:-0.8,z:-0.5},{c:0xff0000,s:0.4,x:1.8,y:0,z:0},{c:0xff0000,s:0.4,x:1,y:1.5,z:1},{c:0xff0000,s:0.4,x:-1,y:1.5,z:1},{c:0xff0000,s:0.4,x:-1.8,y:0,z:0},{c:0xff0000,s:0.4,x:-1,y:-1.5,z:-1},{c:0xff0000,s:0.4,x:1,y:-1.5,z:-1},{c:0xeeeeee,s:0.2,x:1,y:0.5,z:-0.5},{c:0xeeeeee,s:0.2,x:2.5,y:0.5,z:0},{c:0xeeeeee,s:0.2,x:0.5,y:1.2,z:-0.2},{c:0xeeeeee,s:0.2,x:1.5,y:2,z:1},{c:0xeeeeee,s:0.2,x:-0.5,y:1.2,z:-0.2},{c:0xeeeeee,s:0.2,x:-1.5,y:2,z:1},{c:0xeeeeee,s:0.2,x:-1,y:0.5,z:0.5},{c:0xeeeeee,s:0.2,x:-2.5,y:0.5,z:0},{c:0xeeeeee,s:0.2,x:-0.5,y:-1.2,z:0.2},{c:0xeeeeee,s:0.2,x:-1.5,y:-2,z:-1},{c:0xeeeeee,s:0.2,x:0.5,y:-1.2,z:0.2},{c:0xeeeeee,s:0.2,x:1.5,y:-2,z:-1}], b: [{f:0,t:1},{f:1,t:2},{f:2,t:3},{f:3,t:4},{f:4,t:5},{f:5,t:0}], i: false, z: 8},
        {id: 'nacl-box', a: [{c:0x8A2BE2,s:0.65,x:-0.6,y:0.6,z:0.6},{c:0x00ff00,s:0.65,x:0.6,y:0.6,z:0.6},{c:0x00ff00,s:0.65,x:-0.6,y:-0.6,z:0.6},{c:0x8A2BE2,s:0.65,x:0.6,y:-0.6,z:0.6},{c:0x00ff00,s:0.65,x:-0.6,y:0.6,z:-0.6},{c:0x8A2BE2,s:0.65,x:0.6,y:0.6,z:-0.6},{c:0x8A2BE2,s:0.65,x:-0.6,y:-0.6,z:-0.6},{c:0x00ff00,s:0.65,x:0.6,y:-0.6,z:0.6}], b: [], i: true, z: 5},
        {id: 'ethanol-box', a: [{c:0x333333,s:0.5,x:-0.7,y:0,z:0},{c:0x333333,s:0.5,x:0.7,y:0,z:0},{c:0xff0000,s:0.45,x:1.5,y:0.7,z:0},{c:0xeeeeee,s:0.25,x:2.1,y:0.3,z:0},{c:0xeeeeee,s:0.25,x:-1.2,y:0.7,z:0.5},{c:0xeeeeee,s:0.25,x:-1.2,y:-0.7,z:-0.5},{c:0xeeeeee,s:0.25,x:-1.2,y:0,z:-1},{c:0xeeeeee,s:0.25,x:0.7,y:-0.8,z:0.5},{c:0xeeeeee,s:0.25,x:0.7,y:0.8,z:-0.5}], b: [{f:0,t:1},{f:1,t:2},{f:2,t:3},{f:0,t:4},{f:0,t:5},{f:0,t:6},{f:1,t:7},{f:1,t:8}], i: false, z: 5},
        {id: 'naoh-box', a: [{c:0x8A2BE2, s:0.65, x:-0.6, y:0, z:0}, {c:0xff0000, s:0.65, x:0.6, y:0, z:0}, {c:0xeeeeee, s:0.35, x:1.3, y:0, z:0}], b: [{f:1, t:2}], i: false, z: 5},
        {id: 'h2so4-box', a: [{c:0xffff00,s:0.65,x:0,y:0,z:0},{c:0xff0000,s:0.5,x:0,y:1.2,z:0},{c:0xff0000,s:0.5,x:0,y:-1.2,z:0},{c:0xff0000,s:0.5,x:1.1,y:0,z:0.5},{c:0xff0000,s:0.5,x:-1.1,y:0,z:-0.5},{c:0xeeeeee,s:0.25,x:1.6,y:0.6,z:0.5},{c:0xeeeeee,s:0.25,x:-1.6,y:-0.6,z:-0.5}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:0,t:4},{f:3,t:5},{f:4,t:6}], i: false, z: 7},
        {id: 'koh-box', a: [{c:0xc381fd, s:0.7, x:-0.7, y:0, z:0}, {c:0xff0000, s:0.65, x:0.7, y:0, z:0}, {c:0xeeeeee, s:0.35, x:1.4, y:0, z:0}], b: [{f:1, t:2}], i: false, z: 5},
        {id: 'hno3-box', a: [{c:0x0000ff,s:0.55,x:0,y:0,z:0},{c:0xff0000,s:0.5,x:0,y:1.2,z:0},{c:0xff0000,s:0.5,x:1.1,y:-0.6,z:0},{c:0xff0000,s:0.5,x:-1.1,y:-0.6,z:0},{c:0xeeeeee,s:0.25,x:-1.8,y:-0.2,z:0}], b: [{f:0,t:1},{f:0,t:2},{f:0,t:3},{f:3,t:4}], i: false, z: 6},
        {id: 'ki-box', a: [{c:0xffff00,s:0.65,x:-0.65,y:0.65,z:0.65},{c:0x4b0082,s:0.65,x:0.65,y:0.65,z:0.65},{c:0x4b0082,s:0.65,x:-0.65,y:-0.65,z:0.65},{c:0xffff00,s:0.65,x:0.65,y:-0.65,z:0.65},{c:0x4b0082,s:0.65,x:-0.65,y:0.65,z:-0.65},{c:0xffff00,s:0.65,x:0.65,y:0.65,z:-0.65},{c:0xffff00,s:0.65,x:-0.65,y:-0.65,z:-0.65},{c:0x4b0082,s:0.65,x:0.65,y:-0.65,z:-0.65}], b: [], i: true, z: 5}
    ];

    let renderer, camera, scene;
    const scenes = [];

    function init() {
        const canvas = document.createElement('canvas');
        renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
        renderer.setPixelRatio(window.devicePixelRatio);

        molData.forEach(data => {
            const el = document.getElementById(data.id);
            if(!el) return;

            const scene = new THREE.Scene();
            scene.userData.element = el;
            
            const camera = new THREE.PerspectiveCamera(50, 1, 0.1, 100);
            camera.position.z = data.z;
            scene.userData.camera = camera;

            scene.add(new THREE.AmbientLight(0xffffff, 0.8));
            const light = new THREE.PointLight(0xffffff, 1);
            light.position.set(10, 10, 10);
            scene.add(light);

            const group = new THREE.Group();
            data.a.forEach(a => {
                const mesh = new THREE.Mesh(new THREE.SphereGeometry(a.s, 24, 24), new THREE.MeshPhongMaterial({ color: a.c }));
                mesh.position.set(a.x, a.y, a.z);
                group.add(mesh);
            });

            if (!data.i) {
                data.b.forEach(b => {
                    const start = new THREE.Vector3(data.a[b.f].x, data.a[b.f].y, data.a[b.f].z);
                    const end = new THREE.Vector3(data.a[b.t].x, data.a[b.t].y, data.a[b.t].z);
                    const dist = start.distanceTo(end);
                    const cyl = new THREE.Mesh(new THREE.CylinderGeometry(0.08, 0.08, dist, 12), new THREE.MeshPhongMaterial({ color: 0xffffff }));
                    cyl.position.copy(start.clone().lerp(end, 0.5));
                    cyl.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), end.clone().sub(start).normalize());
                    group.add(cyl);
                });
            }
            scene.add(group);
            scene.userData.group = group;
            scenes.push(scene);
        });

        document.body.appendChild(renderer.domElement);
        renderer.domElement.style.position = 'fixed';
        renderer.domElement.style.top = 0;
        renderer.domElement.style.left = 0;
        renderer.domElement.style.width = '100%';
        renderer.domElement.style.height = '100%';
        renderer.domElement.style.pointerEvents = 'none';
        renderer.domElement.style.zIndex = -1;

        animate();
    }

    function animate() {
        requestAnimationFrame(animate);
        renderer.setClearColor(0xffffff);
        renderer.setScissorTest(false);
        renderer.clear();
        renderer.setClearColor(0x808080);
        renderer.setScissorTest(true);

        scenes.forEach(scene => {
            scene.userData.group.rotation.y += 0.01;
            const element = scene.userData.element;
            const rect = element.getBoundingClientRect();

            if (rect.bottom < 0 || rect.top > renderer.domElement.clientHeight ||
                rect.right < 0 || rect.left > renderer.domElement.clientWidth) {
                return; // Off screen
            }

            const width = rect.right - rect.left;
            const height = rect.bottom - rect.top;
            const left = rect.left;
            const bottom = renderer.domElement.clientHeight - rect.bottom;

            renderer.setViewport(left, bottom, width, height);
            renderer.setScissor(left, bottom, width, height);
            renderer.render(scene, scene.userData.camera);
        });
    }

    window.onload = init;
    function searchMolecule() { alert("Search: " + document.getElementById('mol-search').value); }
        </script>
 </body>
</html>
